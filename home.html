<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NUSANFOOD | Home</title>
<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen bg-cover bg-center p-4 text-white" style="background-image:url('bg.png');background-repeat:no-repeat;background-size:cover;background-position:center;">


<h1 class="text-3xl font-bold mb-4 text-center">NUSANFOOD</h1>
<input
  id="search"
  placeholder="Cari makanan..."
  class="w-full p-2 mb-4 rounded text-black"
  onkeyup="renderFoods()"
/>

<div id="list" class="space-y-3"></div>


<script>
let foods = [];

async function loadFoods() {
  const res = await fetch('foods.json');
  foods = await res.json();
  renderFoods();
}

function renderFoods() {
  const q = document.getElementById('search').value.toLowerCase();
  const list = document.getElementById('list');

  list.innerHTML = '';

  foods
    .filter(f =>
      f.nama.toLowerCase().includes(q) ||
      f.lokasi.toLowerCase().includes(q) ||
      f.kategori.join(' ').toLowerCase().includes(q)
    )
    .forEach(f => {
      list.innerHTML += `
      <div onclick="openDetail(${f.id})"
           class="bg-black/60 p-3 rounded flex gap-3 cursor-pointer">
        <img src="${f.foto}" class="w-20 h-20 rounded">
        <div>
          <h3 class="font-bold">${f.nama}</h3>
          <p>${renderStars(f.bintang)}</p>
          <p class="text-sm">${f.lokasi}</p>
        </div>
      </div>`;
    });
}

function openDetail(id) {
  location.href = 'detail.html?id=' + id;
}

function renderStars(n) {
  let s = '';

  for (let i = 1; i <= n; i++) {
    if (i > n) {
      s += '<span class="text-red-600">★</span>';
    } else if (i === 3) {
      s += '<span class="text-green-600">★</span>';
    } else if (i % 2 === 0) {
      s += '<span class="text-blue-600">★</span>';
    } else {
      s += '<span class="text-red-600">★</span>';
    }
  }

  return s;
}
loadFoods();
</script>


</body>
</html>